# Database Configuration
spring.datasource.url=jdbc:mariadb://127.0.0.1:3306/hotelbooking
spring.datasource.username=hotel
spring.datasource.password=hotelpass
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# JPA Configuration
# ddl-auto=create-drop: Hibernate löscht Tabellen (DROP) und erstellt sie neu bei jedem Start (DEV ONLY)
# In Production, use: spring.jpa.hibernate.ddl-auto=validate
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_DDL_AUTO:create-drop}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect

# Vaadin Configuration
# Allow overriding production mode from environment (Docker/JVM). If the
# environment variable `VAADIN_PRODUCTION_MODE` is set to `true`, this will
# enable Vaadin production mode at runtime. Defaults to false for local dev.
vaadin.productionMode=${VAADIN_PRODUCTION_MODE:false}

# SQL Init für Testdaten
spring.sql.init.mode=always
spring.sql.init.data-locations=classpath:data.sql
# Defer running data.sql until after Hibernate has created tables
spring.jpa.defer-datasource-initialization=true

# Demo users for development (set to true to enable creating demo users at startup)
# app.demo-users.enabled=false

# --- Mail (SMTP) configuration - local MailHog defaults
# MailHog listens on SMTP 1025 and provides a web UI on 8025
spring.mail.host=localhost
spring.mail.port=1025
spring.mail.protocol=smtp
# MailHog does not require auth
spring.mail.properties.mail.smtp.auth=false
spring.mail.properties.mail.smtp.starttls.enable=false
# Default from address used by the EmailService
app.mail.from=dev@local.test

# To enable real sending during development, adjust these values for your SMTP provider and restart the application.

# DevTools
# Uploads into src/main/resources/static/** would otherwise trigger DevTools restarts and a browser reload.
# Exclude uploaded images so the ImageManagement edit dialog doesn't get interrupted.
spring.devtools.restart.exclude=static/images/**
spring.devtools.livereload.enabled=false

# Image upload/storage
# Files are stored on the filesystem (not in the classpath). In Docker, mount this directory as a volume.
# URL mapping is handled by StaticResourceConfig: /images/** -> file:${app.images.root-dir}
app.images.root-dir=${APP_IMAGES_ROOT_DIR:data/images}

# Demo image seeding
# Copies classpath demo images from src/main/resources/static/images/rooms into ${app.images.root-dir}/rooms
# on first startup and writes a marker file so deletions won't be undone on restart.
app.images.seed.enabled=${APP_IMAGES_SEED_ENABLED:true}
app.images.seed.marker-file=${APP_IMAGES_SEED_MARKER_FILE:.seeded-demo-images}


