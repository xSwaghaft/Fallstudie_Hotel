# Production Configuration
# This profile is activated when SPRING_PROFILES_ACTIVE=production or -Dspring.profiles.active=production

# Database Configuration (overridden by environment variables in Docker)
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:mariadb://127.0.0.1:3306/hotelbooking}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:hotel}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:hotelpass}
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver

# JPA Configuration - Production Settings
# update: Creates/updates schema (use for first-time setup)
# After first successful start, change to 'validate' for production safety
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_DDL_AUTO:update}
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect

# SQL Init - Only run on first startup or when explicitly enabled
# In production, data.sql should only run once (use 'never' after initial setup)
spring.sql.init.mode=${SPRING_SQL_INIT_MODE:always}
spring.sql.init.data-locations=classpath:data.sql
spring.jpa.defer-datasource-initialization=true

# Vaadin Configuration - Production Mode
vaadin.productionMode=true

# Mail Configuration (overridden by environment variables in Docker)
spring.mail.host=${SPRING_MAIL_HOST:localhost}
spring.mail.port=${SPRING_MAIL_PORT:1025}
spring.mail.protocol=smtp
spring.mail.properties.mail.smtp.auth=${SPRING_MAIL_SMTP_AUTH:false}
spring.mail.properties.mail.smtp.starttls.enable=${SPRING_MAIL_SMTP_STARTTLS:false}
app.mail.from=${APP_MAIL_FROM:noreply@hotel.local}

# DevTools - Disabled in Production
spring.devtools.restart.enabled=false
spring.devtools.livereload.enabled=false

# Image upload/storage
app.images.root-dir=${APP_IMAGES_ROOT_DIR:/app/data/images}

# Demo image seeding - Disabled in Production
app.images.seed.enabled=false
